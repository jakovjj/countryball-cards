<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <meta name="referrer" content="no-referrer-when-downgrade" />
  <title>Game Packages - Countryball Cards</title>
  <meta name="description" content="Choose your perfect Countryball Cards package. From the base game to the premium Founder's Edition with handdrawn cards and exclusive content." />
  <link rel="canonical" href="https://countryballcards.com/packages.html" />
  <meta name="robots" content="index,follow" />
  <meta name="theme-color" content="#151515" />
  
  <!-- Open Graph / Facebook -->
  <meta property="og:title" content="Game Packages - Countryball Cards" />
  <meta property="og:description" content="Choose your perfect package for Countryball Cards. Kickstarter launching October 1st!" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://countryballcards.com/packages.html" />
  <meta property="og:image" content="https://countryballcards.com/logo.png" />
  
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Game Packages - Countryball Cards" />
  <meta name="twitter:description" content="Choose your perfect package. Kickstarter launching October 1st!" />
  <meta name="twitter:image" content="https://countryballcards.com/logo.png" />
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
  <link rel="manifest" href="site.webmanifest">
  
  <link rel="stylesheet" href="styles.css">
  
  <!-- EmailJS SDK - Multiple CDN fallbacks for reliability -->
  <script>
    // Global variable to track EmailJS loading state
    window.emailJSReady = false;
    window.emailJSAttempts = 0;
    
    // Function to load EmailJS with fallbacks
    function loadEmailJS() {
      return new Promise((resolve, reject) => {
        const cdns = [
          'https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js',
          'https://unpkg.com/@emailjs/browser@3/dist/email.min.js',
          'https://cdn.emailjs.com/dist/email.min.js'
        ];
        
        let cdnIndex = 0;
        
        function tryLoadFromCDN() {
          if (cdnIndex >= cdns.length) {
            reject(new Error('All EmailJS CDNs failed to load'));
            return;
          }
          
          const script = document.createElement('script');
          script.src = cdns[cdnIndex];
          script.async = false; // Load synchronously
          
          script.onload = function() {
            console.log(`EmailJS loaded successfully from CDN ${cdnIndex + 1}:`, cdns[cdnIndex]);
            
            // Wait a moment for the library to be fully available
            setTimeout(() => {
              if (typeof emailjs !== 'undefined' && emailjs.init) {
                try {
                  emailjs.init("hvatz7pPDbme6A77h");
                  window.emailJSReady = true;
                  console.log('EmailJS initialized successfully');
                  resolve(true);
                } catch (error) {
                  console.error('EmailJS init failed:', error);
                  reject(error);
                }
              } else {
                console.warn('EmailJS loaded but not available, trying next CDN...');
                cdnIndex++;
                tryLoadFromCDN();
              }
            }, 100);
          };
          
          script.onerror = function() {
            console.warn(`Failed to load EmailJS from CDN ${cdnIndex + 1}:`, cdns[cdnIndex]);
            cdnIndex++;
            tryLoadFromCDN();
          };
          
          document.head.appendChild(script);
        }
        
        tryLoadFromCDN();
      });
    }
    
    // Initialize EmailJS when DOM is ready
    document.addEventListener('DOMContentLoaded', function() {
      console.log('Starting EmailJS initialization...');
      loadEmailJS()
        .then(() => {
          console.log('EmailJS ready for use');
        })
        .catch(error => {
          console.error('EmailJS failed to load from all sources:', error);
          window.emailJSReady = false;
        });
    });
  </script>
  
  <style>
    .packages-hero {
      text-align: center;
      margin-bottom: 40px;
    }
    
    .packages-hero h1 {
      font-size: clamp(28px, 5vw, 48px);
      margin-bottom: 16px;
      background: linear-gradient(135deg, var(--gold), #e6c875);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    /* Country Shipping Card Styles */
    .your-country-card {
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.12), rgba(16, 185, 129, 0.06));
      border: 2px solid rgba(16, 185, 129, 0.4);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 20px;
      animation: slideInUp 0.6s ease-out;
      position: relative;
      overflow: hidden;
    }
    
    @keyframes slideInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .country-flag-section {
      display: flex;
      align-items: center;
      gap: 16px;
      flex: 1;
    }
    
    .country-flag-emoji {
      font-size: 48px;
      line-height: 1;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
      transition: transform 0.3s ease;
    }
    
    .your-country-card:hover .country-flag-emoji {
      transform: scale(1.1);
    }
    
    .country-info h4 {
      color: #10b981;
      margin: 0 0 4px 0;
      font-size: 18px;
      font-weight: 700;
    }
    
    .shipping-status {
      color: var(--muted);
      margin: 0;
      font-size: 14px;
    }
    
    .shipping-status.free {
      color: #10b981;
      font-weight: 600;
    }
    
    .shipping-status.paid {
      color: #f59e0b;
      font-weight: 600;
    }
    
    .shipping-cost-display {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 4px;
      min-width: 120px;
    }
    
    .cost-label {
      color: var(--muted);
      font-size: 13px;
      font-weight: 500;
    }
    
    .cost-amount {
      color: var(--text);
      font-weight: 700;
      font-size: 20px;
    }
    
    .cost-amount.free {
      color: #10b981;
    }
    
    .cost-amount.paid {
      color: #f59e0b;
    }
    
    /* Shipping Zones Toggle */
    .shipping-zones-toggle {
      text-align: center;
      margin: 16px 0;
    }
    
    .toggle-shipping-btn {
      background: rgba(255, 255, 255, 0.03);
      border: none;
      border-radius: 6px;
      color: var(--muted);
      padding: 10px 16px;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      margin: 0 auto;
      min-width: 180px;
    }
    
    .toggle-shipping-btn:hover {
      background: rgba(255, 255, 255, 0.08);
      color: var(--text);
    }
    
    .toggle-icon {
      width: 20px;
      height: 20px;
      transition: transform 0.3s ease;
    }
    
    .toggle-shipping-btn.expanded .toggle-icon {
      transform: rotate(180deg);
    }
    
    .shipping-zones {
      animation: slideDown 0.3s ease-out;
      overflow: hidden;
    }
    
    @keyframes slideDown {
      from {
        opacity: 0;
        max-height: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        max-height: 500px;
        transform: translateY(0);
      }
    }
    
    @media (max-width: 768px) {
      .your-country-card {
        flex-direction: column;
        align-items: flex-start;
        padding: 16px;
        gap: 12px;
      }
      
      .country-flag-section {
        width: 100%;
      }
      
      .country-flag-emoji {
        font-size: 36px;
      }
      
      .country-info h4 {
        font-size: 16px;
      }
      
      .shipping-cost-display {
        width: 100%;
        align-items: flex-start;
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
        min-width: auto;
      }
      
      .cost-amount {
        font-size: 18px;
      }
      
      .toggle-shipping-btn {
        min-width: 160px;
        padding: 8px 12px;
        font-size: 12px;
      }
      
      .toggle-icon {
        width: 18px;
        height: 18px;
      }
    }
    
    .kickstarter-banner {
      background: linear-gradient(135deg, var(--gold), #d4b866);
      color: var(--bg);
      padding: 16px 24px;
      border-radius: 12px;
      margin: 24px 0;
      text-align: center;
      font-weight: 700;
      font-size: 18px;
      box-shadow: 0 4px 20px rgba(199, 164, 85, 0.3);
      animation: glow 2s ease-in-out infinite alternate;
    }
    
    @keyframes glow {
      from { box-shadow: 0 4px 20px rgba(199, 164, 85, 0.3); }
      to { box-shadow: 0 6px 30px rgba(199, 164, 85, 0.5); }
    }
    
    .packages-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 24px;
      margin: 40px 0;
    }
    
    .package-card {
      background: var(--card);
      border: 2px solid rgba(199, 164, 85, 0.3);
      border-radius: 16px;
      padding: 24px;
      position: relative;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      min-height: 400px;
      transform: translateY(0);
    }
    
    .package-card:hover {
      transform: translateY(-8px);
      border-color: rgba(199, 164, 85, 0.6);
      box-shadow: 0 20px 40px rgba(199, 164, 85, 0.15), 0 8px 16px rgba(0, 0, 0, 0.2);
    }
    
    .package-card:hover {
      border-color: var(--gold);
      transform: translateY(-4px);
      box-shadow: 0 12px 40px rgba(199, 164, 85, 0.2);
    }
    
    .package-card.featured {
      border-color: var(--gold);
      box-shadow: 0 8px 32px rgba(199, 164, 85, 0.25);
    }
    
    .package-card.featured::before {
      content: "MOST POPULAR";
      position: absolute;
      top: -1px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--gold);
      color: var(--bg);
      padding: 6px 16px;
      font-size: 12px;
      font-weight: 700;
      border-radius: 0 0 8px 8px;
      letter-spacing: 0.5px;
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { 
        transform: translateX(-50%) scale(1);
        box-shadow: 0 0 0 0 rgba(199, 164, 85, 0.7);
      }
      50% { 
        transform: translateX(-50%) scale(1.05);
        box-shadow: 0 0 0 8px rgba(199, 164, 85, 0);
      }
    }
    
    .package-header {
      text-align: center;
      margin-bottom: 20px;
    }
    
    .package-name {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 8px;
      color: var(--gold);
    }
    
    .package-price {
      font-size: 36px;
      font-weight: 800;
      color: var(--text);
      margin-bottom: 4px;
      transition: all 0.3s ease;
      position: relative;
    }
    
    .package-card:hover .package-price {
      color: var(--text);
      transform: scale(1.05);
    }
    
    .package-subtitle {
      color: var(--muted);
      font-size: 14px;
    }
    
    .package-features {
      list-style: none;
      padding: 0;
      margin: 20px 0;
      flex-grow: 1;
    }
    
    .package-features li {
      padding: 8px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .package-features li:last-child {
      border-bottom: none;
    }
    
    .feature-check {
      color: var(--gold);
      font-weight: 700;
      font-size: 16px;
      transition: transform 0.2s ease;
    }
    
    .package-card:hover .feature-check {
      transform: scale(1.1);
    }
    
    .base-content {
      background: linear-gradient(135deg, rgba(199, 164, 85, 0.12), rgba(199, 164, 85, 0.06));
      border: 2px solid rgba(199, 164, 85, 0.4);
      border-radius: 16px;
      padding: 28px;
      margin: 40px 0;
      position: relative;
      overflow: hidden;
    }
    
    .base-content::before {
      content: '🎮';
      position: absolute;
      top: 20px;
      right: 20px;
      font-size: 24px;
      opacity: 0.4;
    }
    
    .base-content h3 {
      color: var(--gold);
      margin-bottom: 20px;
      text-align: center;
      font-size: 22px;
      font-weight: 700;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
    }
    
    .base-content h3::before {
      content: '📋';
      font-size: 18px;
    }
    
    .base-content ul {
      list-style: none;
      padding: 0;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 12px;
    }
    
    .base-content li {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 16px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
      border: 1px solid rgba(199, 164, 85, 0.2);
      transition: all 0.2s ease;
    }
    
    .base-content li:hover {
      background: rgba(255, 255, 255, 0.08);
      border-color: rgba(199, 164, 85, 0.4);
      transform: translateX(4px);
    }
    
    .base-content .feature-check {
      color: var(--gold);
      font-weight: 700;
      font-size: 16px;
      min-width: 16px;
    }
    
    .shipping-info {
      background: linear-gradient(135deg, rgba(199, 164, 85, 0.08), rgba(199, 164, 85, 0.03));
      border: 1px solid rgba(199, 164, 85, 0.3);
      border-radius: 16px;
      padding: 28px;
      margin: 40px 0;
      position: relative;
      overflow: hidden;
    }
    
    .shipping-info::before {
      content: '🚢';
      position: absolute;
      top: 20px;
      right: 20px;
      font-size: 24px;
      opacity: 0.3;
    }
    
    .shipping-info h3 {
      color: var(--gold);
      margin-bottom: 20px;
      font-size: 24px;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .shipping-info h3::before {
      content: '📦';
      font-size: 20px;
    }
    
    .shipping-zones {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
    }
    
    .shipping-zones[hidden] {
      display: none !important;
    }
    
    .shipping-zone {
      background: rgba(255, 255, 255, 0.05);
      padding: 20px;
      border-radius: 12px;
      border: 2px solid rgba(199, 164, 85, 0.2);
      position: relative;
      overflow: hidden;
    }
    
    .shipping-zone h4 {
      color: var(--gold);
      margin-bottom: 12px;
      font-size: 16px;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .shipping-zone h4::before {
      content: '🌍';
      font-size: 14px;
    }
    
    .shipping-zone p {
      margin: 0;
      font-size: 14px;
      color: var(--muted);
      line-height: 1.4;
    }
    
    .disclaimer {
      background: linear-gradient(135deg, rgba(255, 193, 7, 0.08), rgba(255, 193, 7, 0.03));
      border: 2px solid rgba(255, 193, 7, 0.3);
      border-radius: 12px;
      padding: 20px 24px;
      margin: 40px 0;
      text-align: center;
      color: var(--muted);
      font-size: 14px;
      position: relative;
      overflow: hidden;
    }
    
    .back-button {
      margin-bottom: 24px;
    }
    
    .package-separator {
      height: 20px !important;
      background: red !important;
      margin: 24px 0 20px 0 !important;
      border-radius: 2px !important;
      width: 100% !important;
      display: block !important;
    }
    
    .packages-bottom-cta {
      text-align: center;
      margin: 48px 0 32px 0;
      padding: 32px 24px;
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(199, 164, 85, 0.2);
      border-radius: 16px;
    }
    
    .packages-bottom-cta h3 {
      color: var(--gold);
      margin-bottom: 24px;
      font-size: 24px;
    }
    
    .packages-bottom-cta .cta {
      display: flex;
      gap: 16px;
      justify-content: center;
      align-items: center;
      flex-wrap: nowrap;
      margin: 0;
      flex-direction: row;
    }
    
    .packages-bottom-cta .btn {
      min-width: 180px;
      flex: 0 0 auto;
      white-space: nowrap;
    }
    
    .select-package-btn {
      background: linear-gradient(135deg, var(--gold), #d4b866);
      color: var(--bg);
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-weight: 700;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      width: 100%;
      margin-top: auto;
      box-shadow: 0 4px 16px rgba(199, 164, 85, 0.3);
    }
    
    .select-package-btn:hover {
      background: linear-gradient(135deg, #d4b866, #e6c875);
      transform: translateY(-2px);
      box-shadow: 0 6px 24px rgba(199, 164, 85, 0.4);
    }
    
    .select-package-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    
    /* Extended Edition - Purple Theme */
    .package-card.extended-edition {
      border-color: #8b5cf6;
      background: linear-gradient(135deg, rgba(139, 92, 246, 0.08), rgba(139, 92, 246, 0.03));
    }
    
    .package-card.extended-edition:hover {
      border-color: #7c3aed;
      box-shadow: 0 12px 40px rgba(139, 92, 246, 0.25);
    }
    
    .package-card.extended-edition .package-name {
      color: #8b5cf6;
    }
    
    .package-card.extended-edition .feature-check {
      color: #8b5cf6;
    }
    
    .package-card.extended-edition .select-package-btn {
      background: linear-gradient(135deg, #8b5cf6, #7c3aed);
      box-shadow: 0 4px 16px rgba(139, 92, 246, 0.3);
    }
    
    .package-card.extended-edition .select-package-btn:hover {
      background: linear-gradient(135deg, #7c3aed, #6d28d9);
      box-shadow: 0 6px 24px rgba(139, 92, 246, 0.4);
    }
    
    /* Founder's Edition - Emerald Theme with Holographic Effect */
    .package-card.founders-edition {
      border-color: #10b981;
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.08), rgba(16, 185, 129, 0.03));
      position: relative;
      overflow: hidden;
    }
    
    .package-card.founders-edition::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(
        90deg,
        transparent,
        rgba(16, 185, 129, 0.15),
        rgba(6, 182, 212, 0.15),
        rgba(168, 85, 247, 0.15),
        rgba(236, 72, 153, 0.15),
        transparent
      );
      animation: holographic 3s infinite;
      z-index: 1;
      pointer-events: none;
    }
    
    .package-card.founders-edition > * {
      position: relative;
      z-index: 2;
    }
    
    @keyframes holographic {
      0% { left: -100%; }
      100% { left: 100%; }
    }
    
    .package-card.founders-edition:hover {
      border-color: #059669;
      box-shadow: 0 12px 40px rgba(16, 185, 129, 0.25);
    }
    
    .package-card.founders-edition .package-name {
      color: #10b981;
    }
    
    .package-card.founders-edition .feature-check {
      color: #10b981;
    }
    
    .package-card.founders-edition .select-package-btn {
      background: linear-gradient(135deg, #10b981, #059669);
      box-shadow: 0 4px 16px rgba(16, 185, 129, 0.3);
    }
    
    .package-card.founders-edition .select-package-btn:hover {
      background: linear-gradient(135deg, #059669, #047857);
      box-shadow: 0 6px 24px rgba(16, 185, 129, 0.4);
    }
    
    /* Holographic Text Effect */
    .holographic {
      background: linear-gradient(
        45deg,
        #ff0000 0%,
        #ff8000 16%,
        #ffff00 32%,
        #80ff00 48%,
        #00ff80 64%,
        #0080ff 80%,
        #8000ff 96%,
        #ff0080 100%
      );
      background-size: 200% 200%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: holographic-shimmer 3s ease-in-out infinite;
      font-weight: 700;
      display: inline;
    }
    
    /* Simpler holographic text for inline use */
    .holographic-text {
      background: linear-gradient(45deg, #10b981, #06b6d4, #8b5cf6);
      background-size: 200% 200%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: subtle-shimmer 4s ease-in-out infinite;
      font-weight: 700;
      display: inline-block;
    }
    
    @keyframes subtle-shimmer {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    
    @keyframes holographic-shimmer {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    /* Fallback for browsers that don't support background-clip: text */
    @supports not (-webkit-background-clip: text) {
      .holographic {
        background: none;
        -webkit-text-fill-color: initial;
        color: #ff6b9d;
        text-shadow: 0 0 10px rgba(255, 107, 157, 0.5);
      }
      
      .holographic-text {
        background: none;
        -webkit-text-fill-color: initial;
        color: #10b981;
        text-shadow: 0 0 8px rgba(16, 185, 129, 0.4);
      }
    }
    
    @media (max-width: 768px) {
      .packages-grid {
        grid-template-columns: 1fr;
        gap: 20px;
      }
      
      .package-card {
        padding: 20px;
      }
      
      .package-card:hover {
        transform: translateY(-4px);
      }
      
      .package-price {
        font-size: 30px;
      }
      
      .shipping-zones {
        grid-template-columns: 1fr;
      }
      
      .base-content ul {
        grid-template-columns: 1fr;
      }
      
      .packages-bottom-cta .cta {
        flex-direction: column;
        align-items: center;
        gap: 12px;
        flex-wrap: nowrap;
      }
      
      .packages-bottom-cta .btn {
        min-width: 260px;
      }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="frame">
      <div class="back-button">
        <a href="index.html" class="btn secondary" onclick="trackBackToHome()">
          <span class="btn-row">
            <svg class="btn-icon" viewBox="0 0 24 24" fill="currentColor">
              <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.42-1.41L7.83 13H20v-2z"/>
            </svg>
            <span class="btn-label">Back to Home</span>
          </span>
        </a>
      </div>

      <div class="packages-hero">
        <h1>Choose Your Package</h1>
        <p class="sub">Select the perfect edition for your countryball adventure.</p>
      </div>

      <div class="packages-grid">
        <!-- Base Game -->
        <div class="package-card">
          <div class="package-header">
            <div class="package-name">Base Game</div>
            <div class="package-price" data-eur="25">€25 / $29</div>
            <div class="package-subtitle">Perfect for getting started</div>
          </div>
          <ul class="package-features">
            <li><span class="feature-check">✓</span> Complete base game experience</li>
            <li><span class="feature-check">✓</span> All essential components included</li>
            <li><span class="feature-check">✓</span> Free shipping (see zones below)</li>
            <li><span class="feature-check">✓</span> Perfect for 2-4 players</li>
          </ul>
          <button class="select-package-btn" onclick="showEmailModal(); trackPackageInterest('Base Game', 25)">Sign Up</button>
        </div>

        <!-- 2-Pack -->
        <div class="package-card">
          <div class="package-header">
            <div class="package-name">2-Pack</div>
            <div class="package-price" data-eur="40">€40 / $47</div>
            <div class="package-subtitle">Great value for friends</div>
          </div>
          <ul class="package-features">
            <li><span class="feature-check">✓</span> Two complete base games</li>
            <li><span class="feature-check">✓</span> Share with friends and family</li>
            <li><span class="feature-check">✓</span> Save 10€ compared to buying separately</li>
            <li><span class="feature-check">✓</span> Free shipping (see zones below)</li>
            <li><span class="feature-check">✓</span> Perfect for tournaments</li>
          </ul>
          <button class="select-package-btn" onclick="showEmailModal(); trackPackageInterest('2-Pack', 40)">Sign Up</button>
        </div>

        <!-- Extended Edition -->
        <div class="package-card extended-edition">
          <div class="package-header">
            <div class="package-name">Extended Edition</div>
            <div class="package-price" data-eur="35">€35 / $41</div>
            <div class="package-subtitle">Enhanced gameplay experience</div>
          </div>
          <ul class="package-features">
            <li><span class="feature-check">✓</span> Complete base game</li>
            <li><span class="feature-check">✓</span> 2 exclusive mini-expansions (Bazaar Boom, Banners United)</li>
            <li><span class="feature-check">✓</span> Additional strategic depth</li>
            <li><span class="feature-check">✓</span> Extended replayability</li>
            <li><span class="feature-check">✓</span> Free shipping (see zones below)</li>
          </ul>
          <button class="select-package-btn" onclick="showEmailModal(); trackPackageInterest('Extended Edition', 35)">Sign Up</button>
        </div>

        <!-- Founder's Edition -->
        <div class="package-card founders-edition">
          <div class="package-header">
            <div class="package-name">Founder's Edition</div>
            <div class="package-price" data-eur="50">€50 / $59</div>
            <div class="package-subtitle">The ultimate collector's package</div>
          </div>
          <ul class="package-features">
            <li><span class="feature-check">✓</span> Everything from Extended Edition</li>
            <li><span class="feature-check">✓</span> Numbered Founder's certificate card</li>
            <li><span class="feature-check">✓</span> 5 holographic Megaball evolution cards</li>
            <li><span class="feature-check">✓</span> 8 blank templates for custom cards</li>
            <li><span class="feature-check">✓</span> Limited collector's edition</li>
            <li><span class="feature-check">✓</span> Free shipping (see zones below)</li>
          </ul>
          <button class="select-package-btn" onclick="showEmailModal(); trackPackageInterest('Founders Edition', 50)">Sign Up</button>
        </div>
      </div>

      <div class="base-content">
        <h3>Included in All Versions</h3>
        <ul>
          <li><span class="feature-check">✓</span> 20 Countryball Cards (+ 1 Evolution Card)</li>
          <li><span class="feature-check">✓</span> 20-Sided Dice</li>
          <li><span class="feature-check">✓</span> 60 Resource Cards (15 per resource)</li>
          <li><span class="feature-check">✓</span> 15 Skull Markers (Hit Tags)</li>
          <li><span class="feature-check">✓</span> 60 Coin Tokens</li>
          <li><span class="feature-check">✓</span> 8 Special Cards</li>
          <li><span class="feature-check">✓</span> 4 Dice for the Resource Market</li>
          <li><span class="feature-check">✓</span> Complete Rules & Strategy Guide</li>
        </ul>
      </div>

      <div class="shipping-info">
        <h3>Shipping Information</h3>
        
        <!-- Country-Specific Shipping Card -->
        <div class="your-country-card" id="countryShippingCard" hidden>
          <div class="country-flag-section">
            <span class="country-flag-emoji" id="countryFlagEmoji">🌍</span>
            <div class="country-info">
              <h4 id="countryName">Detecting your location...</h4>
              <p class="shipping-status" id="shippingStatus">Calculating shipping for your country...</p>
            </div>
          </div>
          <div class="shipping-cost-display">
            <span class="cost-label">Your shipping cost:</span>
            <span class="cost-amount" id="costAmount">-</span>
          </div>
        </div>
        
        <div class="shipping-zones-toggle">
          <button class="toggle-shipping-btn" id="toggleShippingBtn" onclick="toggleShippingZones()">
            <span class="toggle-text">View Shipping to Other Countries</span>
            <svg class="toggle-icon" viewBox="0 0 24 24" fill="currentColor">
              <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
            </svg>
          </button>
        </div>
        
        <div class="shipping-zones" id="shippingZones" hidden>
          <div class="shipping-zone">
            <h4>FREE SHIPPING</h4>
            <p>US, AT, BE, CZ, DK, FI, FR, IT, HR, HU, NL, DE, PL, SE, SI, SK</p>
          </div>
          <div class="shipping-zone">
            <h4 class="shipping-price" data-eur="4" data-usd="5">€4 / $5 SHIPPING</h4>
            <p>BG, CY, EE, ES, FI, GR, IE, LV, LT, LU, MT, NO, PT, RO</p>
          </div>
          <div class="shipping-zone">
            <h4 class="shipping-price" data-eur="5.5" data-usd="6">€5.5 / $6 SHIPPING</h4>
            <p>AL, AD, BA, ME, GG, XK, LI, MK, MD, MC, NO, IM, FO, SM, RS, CH, UK, UA, VA, UAE</p>
          </div>
          <div class="shipping-zone">
            <h4 class="shipping-price" data-eur="12" data-usd="14">€12 / $14 SHIPPING</h4>
            <p>Rest of the world (e.g., Australia, Canada, Japan, New Zealand...)</p>
          </div>
        </div>
      </div>

      <div class="disclaimer">
        <strong>Please note:</strong> Package contents, pricing, and shipping information are subject to change before the final Kickstarter launch. We're working hard to finalize all details for the best possible experience!
      </div>

      <!-- Call to Action Buttons -->
      <div class="packages-bottom-cta">
        <h3>Stay Updated & Join Our Community</h3>
        <div class="cta">
          <button class="btn primary" id="emailBtn" onclick="showEmailModal()">
            <span class="btn-row">
              <svg class="btn-icon" viewBox="0 0 24 24" fill="currentColor">
                <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
              </svg>
              <span class="btn-label">Get Updates</span>
            </span>
          </button>
          <a class="btn primary" id="discordBtn" href="https://discord.gg/GVkrHXvzf8" target="_blank" rel="noopener" onclick="trackDiscordClick()">
            <span class="btn-row">
              <svg class="btn-icon" viewBox="0 0 24 24" fill="currentColor">
                <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/>
              </svg>
              <span class="btn-label">Join Discord</span>
            </span>
          </a>
          <a class="btn primary" id="redditBtn" href="https://reddit.com/r/countryball_cards" target="_blank" rel="noopener" onclick="trackRedditClick()">
            <span class="btn-row">
              <svg class="btn-icon" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.43-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/>
              </svg>
              <span class="btn-label">Join Subreddit</span>
            </span>
          </a>
        </div>
        <div class="privacy-notice" style="font-size:12px;color:var(--muted);margin-top:8px">
          By subscribing, you agree to our <a href="privacy-policy.html" style="color:var(--gold);text-decoration:none">Privacy Policy</a>
        </div>
      </div>

      <div class="footer">
        © 2025 Glare Studios • Made for fans of countryballs & strategy.<br>
        <a href="privacy-policy.html" style="color:var(--gold);text-decoration:none">Privacy Policy</a> • 
        <a href="terms-and-conditions.html" style="color:var(--gold);text-decoration:none">Terms & Conditions</a>
      </div>
    </div>
  </div>

  <!-- Email Signup Modal -->
  <div class="modal-overlay" id="emailOverlay" hidden aria-hidden="true">
    <div class="modal email-modal" role="dialog" aria-modal="true" aria-labelledby="emailModalTitle" tabindex="-1">
      <header>
        <h2 id="emailModalTitle">🚀 Get Kickstarter Updates</h2>
        <button class="modal-close" type="button" id="emailCloseBtn" aria-label="Close email signup">✕</button>
      </header>
      <div class="email-modal-content">
        <p>Be the first to know when our Kickstarter launches on October 1st!</p>
        <form id="emailForm" class="email-form">
          <div class="form-group">
            <label for="emailInput" class="visually-hidden">Email address</label>
            <input 
              type="email" 
              id="emailInput" 
              placeholder="Enter your email address" 
              required 
              autocomplete="email"
              class="email-input"
            >
            <button type="submit" class="email-submit-btn" id="emailSubmitBtn">
              <span class="submit-text">Get Updates</span>
              <svg class="submit-icon" viewBox="0 0 24 24" fill="currentColor">
                <path d="M2,21L23,12L2,3V10L17,12L2,14V21Z"/>
              </svg>
            </button>
          </div>
          <div class="form-message" id="formMessage"></div>
        </form>
        <div class="email-benefits">
          <div class="benefit">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
            </svg>
            <span>Kickstarter launch notification</span>
          </div>
          <div class="benefit">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
            </svg>
            <span>Game updates and community news</span>
          </div>
          <div class="benefit">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
            </svg>
            <span>No spam, unsubscribe anytime</span>
          </div>
        </div>
      </div>
      <footer class="email-modal-footer">
        <span class="privacy-text">
          We respect your privacy. See our <a href="privacy-policy.html" target="_blank">Privacy Policy</a>.
        </span>
      </footer>
    </div>
  </div>

  <script src="analytics.js" defer></script>
  <script>
    // Eurozone countries
    const eurozoneCountries = [
      'AT', 'BE', 'CY', 'EE', 'FI', 'FR', 'DE', 'GR', 'IE', 'IT', 'LV', 'LT', 'LU', 'MT', 'NL', 'PT', 'SK', 'SI', 'ES', 'HR'
    ];

    // Country shipping data with flag emojis
    const shippingData = {
      // Free shipping countries
      'US': { cost: 'FREE', flag: '🇺🇸', name: 'United States' },
      'AT': { cost: 'FREE', flag: '🇦🇹', name: 'Austria' },
      'BE': { cost: 'FREE', flag: '🇧🇪', name: 'Belgium' },
      'CZ': { cost: 'FREE', flag: '🇨🇿', name: 'Czech Republic' },
      'DK': { cost: 'FREE', flag: '🇩🇰', name: 'Denmark' },
      'FI': { cost: 'FREE', flag: '🇫🇮', name: 'Finland' },
      'FR': { cost: 'FREE', flag: '🇫🇷', name: 'France' },
      'IT': { cost: 'FREE', flag: '🇮🇹', name: 'Italy' },
      'HR': { cost: 'FREE', flag: '🇭🇷', name: 'Croatia' },
      'HU': { cost: 'FREE', flag: '🇭🇺', name: 'Hungary' },
      'NL': { cost: 'FREE', flag: '🇳🇱', name: 'Netherlands' },
      'DE': { cost: 'FREE', flag: '🇩🇪', name: 'Germany' },
      'PL': { cost: 'FREE', flag: '🇵🇱', name: 'Poland' },
      'SE': { cost: 'FREE', flag: '🇸🇪', name: 'Sweden' },
      'SI': { cost: 'FREE', flag: '🇸🇮', name: 'Slovenia' },
      'SK': { cost: 'FREE', flag: '🇸🇰', name: 'Slovakia' },
      
      // €4 / $5 shipping
      'BG': { cost: '€4 / $5', flag: '🇧🇬', name: 'Bulgaria' },
      'CY': { cost: '€4 / $5', flag: '🇨🇾', name: 'Cyprus' },
      'EE': { cost: '€4 / $5', flag: '🇪🇪', name: 'Estonia' },
      'ES': { cost: '€4 / $5', flag: '🇪🇸', name: 'Spain' },
      'GR': { cost: '€4 / $5', flag: '🇬🇷', name: 'Greece' },
      'IE': { cost: '€4 / $5', flag: '🇮🇪', name: 'Ireland' },
      'LV': { cost: '€4 / $5', flag: '🇱🇻', name: 'Latvia' },
      'LT': { cost: '€4 / $5', flag: '🇱🇹', name: 'Lithuania' },
      'LU': { cost: '€4 / $5', flag: '🇱🇺', name: 'Luxembourg' },
      'MT': { cost: '€4 / $5', flag: '🇲🇹', name: 'Malta' },
      'NO': { cost: '€4 / $5', flag: '🇳🇴', name: 'Norway' },
      'PT': { cost: '€4 / $5', flag: '🇵🇹', name: 'Portugal' },
      'RO': { cost: '€4 / $5', flag: '🇷🇴', name: 'Romania' },
      
      // €5.5 / $6 shipping
      'AL': { cost: '€5.5 / $6', flag: '🇦🇱', name: 'Albania' },
      'AD': { cost: '€5.5 / $6', flag: '🇦🇩', name: 'Andorra' },
      'BA': { cost: '€5.5 / $6', flag: '🇧🇦', name: 'Bosnia and Herzegovina' },
      'ME': { cost: '€5.5 / $6', flag: '🇲🇪', name: 'Montenegro' },
      'GG': { cost: '€5.5 / $6', flag: '🇬🇬', name: 'Guernsey' },
      'XK': { cost: '€5.5 / $6', flag: '🇽🇰', name: 'Kosovo' },
      'LI': { cost: '€5.5 / $6', flag: '🇱🇮', name: 'Liechtenstein' },
      'MK': { cost: '€5.5 / $6', flag: '🇲🇰', name: 'North Macedonia' },
      'MD': { cost: '€5.5 / $6', flag: '🇲🇩', name: 'Moldova' },
      'MC': { cost: '€5.5 / $6', flag: '🇲🇨', name: 'Monaco' },
      'IM': { cost: '€5.5 / $6', flag: '🇮🇲', name: 'Isle of Man' },
      'FO': { cost: '€5.5 / $6', flag: '🇫🇴', name: 'Faroe Islands' },
      'SM': { cost: '€5.5 / $6', flag: '🇸🇲', name: 'San Marino' },
      'RS': { cost: '€5.5 / $6', flag: '🇷🇸', name: 'Serbia' },
      'CH': { cost: '€5.5 / $6', flag: '🇨🇭', name: 'Switzerland' },
      'GB': { cost: '€5.5 / $6', flag: '🇬🇧', name: 'United Kingdom' },
      'UA': { cost: '€5.5 / $6', flag: '🇺🇦', name: 'Ukraine' },
      'VA': { cost: '€5.5 / $6', flag: '🇻🇦', name: 'Vatican City' },
      'AE': { cost: '€5.5 / $6', flag: '🇦🇪', name: 'United Arab Emirates' },
      
      // Popular countries with €12 / $14 shipping
      'AU': { cost: '€12 / $14', flag: '🇦🇺', name: 'Australia' },
      'CA': { cost: '€12 / $14', flag: '🇨🇦', name: 'Canada' },
      'JP': { cost: '€12 / $14', flag: '🇯🇵', name: 'Japan' },
      'NZ': { cost: '€12 / $14', flag: '🇳🇿', name: 'New Zealand' },
      'SG': { cost: '€12 / $14', flag: '🇸🇬', name: 'Singapore' },
      'KR': { cost: '€12 / $14', flag: '🇰🇷', name: 'South Korea' },
      'HK': { cost: '€12 / $14', flag: '🇭🇰', name: 'Hong Kong' },
      'CN': { cost: '€12 / $14', flag: '🇨🇳', name: 'China' },
      'BR': { cost: '€12 / $14', flag: '🇧🇷', name: 'Brazil' },
      'MX': { cost: '€12 / $14', flag: '🇲🇽', name: 'Mexico' },
      'RU': { cost: '€12 / $14', flag: '🇷🇺', name: 'Russia' },
      'TR': { cost: '€12 / $14', flag: '🇹🇷', name: 'Turkey' },
      'IN': { cost: '€12 / $14', flag: '🇮🇳', name: 'India' },
      'IL': { cost: '€12 / $14', flag: '🇮🇱', name: 'Israel' },
      'ZA': { cost: '€12 / $14', flag: '🇿🇦', name: 'South Africa' }
    };

    // Static price display (1€ = 1.17$, already calculated and rounded)
    function updatePricesBasedOnLocation() {
      try {
        // Use test country if set, otherwise fetch real location
        let countryCode;
        if (window.testCountry) {
          countryCode = window.testCountry;
          console.log('Using test country:', countryCode);
          showPricesForRegion(countryCode);
          updateShippingCard(countryCode);
        } else {
          fetch('https://ipapi.co/json/')
            .then(response => response.json())
            .then(data => {
              countryCode = data.country_code;
              console.log('Detected country:', countryCode);
              showPricesForRegion(countryCode);
              updateShippingCard(countryCode, data.country_name);
            })
            .catch(() => {
              console.log('Could not detect location, showing EUR prices');
              showPricesForRegion('DE'); // Default to EUR
              updateShippingCard('DE', 'Germany');
            });
        }
      } catch (error) {
        console.log('Error in price update:', error);
      }
    }
    
    function updateShippingCard(countryCode, countryName = null) {
      const card = document.getElementById('countryShippingCard');
      const flagEmoji = document.getElementById('countryFlagEmoji');
      const nameEl = document.getElementById('countryName');
      const statusEl = document.getElementById('shippingStatus');
      const costEl = document.getElementById('costAmount');
      
      if (!card || !flagEmoji || !nameEl || !statusEl || !costEl) {
        console.log('Shipping card elements not found');
        return;
      }
      
      const shipping = shippingData[countryCode];
      const isEurozone = eurozoneCountries.includes(countryCode);
      
      if (shipping) {
        // Update flag emoji
        flagEmoji.textContent = shipping.flag;
        
        // Update country name
        nameEl.textContent = shipping.name;
        
        // Update shipping cost
        let displayCost = shipping.cost;
        if (shipping.cost !== 'FREE' && shipping.cost.includes('/')) {
          displayCost = isEurozone ? shipping.cost.split(' / ')[0] : shipping.cost.split(' / ')[1];
        }
        costEl.textContent = displayCost;
        
        // Update status and styling
        if (shipping.cost === 'FREE') {
          statusEl.textContent = '🎉 You qualify for free shipping!';
          statusEl.className = 'shipping-status free';
          costEl.className = 'cost-amount free';
        } else {
          statusEl.textContent = `Shipping to ${shipping.name}`;
          statusEl.className = 'shipping-status paid';
          costEl.className = 'cost-amount paid';
        }
        
        // Show the card with animation
        card.hidden = false;
        
        console.log(`Updated shipping card for ${shipping.name} (${countryCode})`);
      } else {
        // Country not in shipping data - show generic worldwide shipping
        flagEmoji.textContent = '🌍';
        
        nameEl.textContent = countryName || 'Your Location';
        statusEl.textContent = 'Worldwide shipping available';
        statusEl.className = 'shipping-status paid';
        
        // Show worldwide shipping cost
        const worldCost = isEurozone ? '€12' : '$14';
        costEl.textContent = worldCost;
        costEl.className = 'cost-amount paid';
        
        card.hidden = false;
        console.log(`Updated shipping card for worldwide shipping (${countryCode})`);
      }
      
      // Track shipping info display
      if (typeof gtag !== 'undefined') {
        gtag('event', 'shipping_info_displayed', {
          event_category: 'user_data',
          event_label: countryCode,
          custom_parameter: shipping ? shipping.cost : 'worldwide',
          value: 1
        });
      }
    }
    
    function showPricesForRegion(countryCode) {
      const isEurozone = eurozoneCountries.includes(countryCode);
      
      // Update package prices
      document.querySelectorAll('.package-price').forEach(el => {
        if (isEurozone) {
          // Show only EUR: "€25 / $29" → "€25"
          const originalText = el.textContent;
          if (originalText.includes(' / ')) {
            el.textContent = originalText.split(' / ')[0];
          }
        } else {
          // Show only USD: "€25 / $29" → "$29"
          const originalText = el.textContent;
          if (originalText.includes(' / ')) {
            el.textContent = originalText.split(' / ')[1];
          } else if (originalText.startsWith('€')) {
            // Convert from EUR display to USD
            const eurValue = parseInt(originalText.replace('€', ''));
            let usdValue;
            switch(eurValue) {
              case 25: usdValue = 29; break;
              case 40: usdValue = 47; break;
              case 35: usdValue = 41; break;
              case 50: usdValue = 59; break;
              default: usdValue = Math.round(eurValue * 1.17);
            }
            el.textContent = `$${usdValue}`;
          }
        }
      });
      
      // Update shipping prices
      document.querySelectorAll('.shipping-price').forEach(el => {
        if (isEurozone) {
          // Show only EUR: "€4 / $5 SHIPPING" → "€4 SHIPPING"
          const originalText = el.textContent;
          if (originalText.includes(' / ')) {
            el.textContent = originalText.replace(/ \/ \$\d+ SHIPPING/, ' SHIPPING');
          }
        } else {
          // Show only USD: "€4 / $5 SHIPPING" → "$5 SHIPPING"
          const originalText = el.textContent;
          if (originalText.includes(' / ')) {
            const usdPart = originalText.match(/\$(\d+) SHIPPING/);
            if (usdPart) {
              el.textContent = `$${usdPart[1]} SHIPPING`;
            }
          } else if (originalText.match(/€[\d.]+/)) {
            // Convert from EUR display to USD
            const eurMatch = originalText.match(/€([\d.]+)/);
            if (eurMatch) {
              const eurValue = parseFloat(eurMatch[1]);
              let usdValue;
              if (eurValue === 4) usdValue = 5;
              else if (eurValue === 5.5) usdValue = 6;
              else if (eurValue === 12) usdValue = 14;
              else usdValue = Math.round(eurValue * 1.17);
              el.textContent = `$${usdValue} SHIPPING`;
            }
          }
        }
      });
      
      console.log(`Showing ${isEurozone ? 'EUR only' : 'USD only'} prices for ${countryCode}`);
      
      // Track currency display
      if (typeof gtag !== 'undefined') {
        gtag('event', 'currency_displayed', {
          event_category: 'user_data',
          event_label: isEurozone ? 'EUR' : 'USD',
          custom_parameter: countryCode,
          value: 1
        });
      }
    }

    // Simple function for easy testing
    window.updateCountry = function(testCountry) {
      if (testCountry) {
        window.testCountry = testCountry;
        showPricesForRegion(testCountry);
        updateShippingCard(testCountry);
        console.log(`Updated to test country: ${testCountry}`);
      } else if (window.testCountry) {
        showPricesForRegion(window.testCountry);
        updateShippingCard(window.testCountry);
        console.log(`Refreshed for test country: ${window.testCountry}`);
      } else {
        console.log('Set window.testCountry first! Example: window.updateCountry("US")');
        console.log('Available countries: US, DE, CA, AU, JP, GB, FR, IT, ES, NL, CH, NO, etc.');
      }
    };
    
    // Debug function to test different countries quickly
    window.testShipping = function() {
      const testCountries = ['US', 'DE', 'CA', 'AU', 'JP', 'GB', 'FR', 'NO', 'CH', 'UA', 'CN', 'BR'];
      let index = 0;
      
      function cycleCountry() {
        const country = testCountries[index];
        window.updateCountry(country);
        console.log(`Testing ${country} (${index + 1}/${testCountries.length})`);
        index = (index + 1) % testCountries.length;
      }
      
      cycleCountry();
      console.log('Use window.testShipping() again to cycle to next country');
      return cycleCountry;
    };
    
    // Toggle shipping zones visibility
    function toggleShippingZones() {
      const zones = document.getElementById('shippingZones');
      const btn = document.getElementById('toggleShippingBtn');
      const toggleText = btn.querySelector('.toggle-text');
      
      if (!zones || !btn || !toggleText) return;
      
      if (zones.hidden) {
        // Show zones
        zones.hidden = false;
        btn.classList.add('expanded');
        toggleText.textContent = 'Hide Other Countries';
        
        // Track expansion
        if (typeof gtag !== 'undefined') {
          gtag('event', 'shipping_zones_expanded', {
            event_category: 'engagement',
            event_label: 'view_all_shipping',
            value: 1
          });
        }
      } else {
        // Hide zones
        zones.hidden = true;
        btn.classList.remove('expanded');
        toggleText.textContent = 'View Shipping to Other Countries';
        
        // Scroll back to the shipping section smoothly
        const shippingInfo = document.querySelector('.shipping-info');
        if (shippingInfo) {
          shippingInfo.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
      }
    }
    // Track packages page view
    if (typeof gtag !== 'undefined') {
      gtag('event', 'page_view', {
        page_title: 'Game Packages',
        page_location: window.location.href,
        custom_parameter: 'packages_visited'
      });
      
      // Track packages interest
      gtag('event', 'packages_page_viewed', {
        event_category: 'engagement',
        event_label: 'packages_comparison',
        value: 1
      });
    }
    
    function trackBackToHome() {
      if (typeof gtag !== 'undefined') {
        gtag('event', 'back_to_home_clicked', {
          event_category: 'navigation',
          event_label: 'packages_to_home',
          value: 1
        });
      }
    }
    
    function trackPackageInterest(packageName, price) {
      if (typeof gtag !== 'undefined') {
        gtag('event', 'package_button_clicked', {
          event_category: 'conversion',
          event_label: packageName,
          value: price
        });
      }
    }
    
    function trackEmailSignup() {
      if (typeof gtag !== 'undefined') {
        gtag('event', 'email_signup_clicked', {
          event_category: 'conversion',
          event_label: 'get_updates_packages',
          value: 1
        });
      }
    }
    
    function trackDiscordClick() {
      if (typeof gtag !== 'undefined') {
        gtag('event', 'discord_clicked', {
          event_category: 'social',
          event_label: 'join_discord_packages',
          value: 1
        });
      }
    }
    
    function trackRedditClick() {
      if (typeof gtag !== 'undefined') {
        gtag('event', 'reddit_clicked', {
          event_category: 'social',
          event_label: 'join_subreddit_packages',
          value: 1
        });
      }
    }
    
    // Simple function for easy testing
    window.updateCountry = function() {
      if (window.testCountry) {
        updatePricesBasedOnLocation();
      } else {
        console.log('Set window.testCountry first! Example: window.testCountry = "US"');
      }
    };
    
    // Initialize currency conversion on page load (only if package cards exist)
    document.addEventListener('DOMContentLoaded', function() {
      if (document.querySelectorAll('.package-card').length > 0) {
        updatePricesBasedOnLocation();
      }
      
      // Remove holographic class on small screens
      function handleHolographicClass() {
        const holographicElements = document.querySelectorAll('.holographic, .holographic-text');
        if (window.innerWidth < 400) {
          holographicElements.forEach(el => {
            el.classList.remove('holographic', 'holographic-text');
            el.style.color = '#10b981'; // Fallback color
          });
        } else {
          holographicElements.forEach(el => {
            el.style.color = ''; // Remove inline style
            if (el.textContent === 'holographic') {
              if (!el.classList.contains('holographic-text')) {
                el.classList.add('holographic-text');
              }
            } else {
              if (!el.classList.contains('holographic')) {
                el.classList.add('holographic');
              }
            }
          });
        }
      }
      
      // Check on load
      handleHolographicClass();
      
      // Check on resize
      window.addEventListener('resize', handleHolographicClass);
    });

    // Email modal functionality
    function showEmailModal() {
      const overlay = document.getElementById('emailOverlay');
      const dialog = overlay ? overlay.querySelector('.modal') : null;
      const closeBtn = document.getElementById('emailCloseBtn');
      const emailForm = document.getElementById('emailForm');
      const emailInput = document.getElementById('emailInput');
      const submitBtn = document.getElementById('emailSubmitBtn');
      const formMessage = document.getElementById('formMessage');
      
      if (!overlay || !dialog) return;
      
      let lastFocus = null;
      
      function open() {
        lastFocus = document.activeElement;
        overlay.hidden = false;
        overlay.setAttribute('aria-hidden', 'false');
        document.body.style.overflow = 'hidden';
        
        // Track modal open
        trackEmailSignup();
        
        // Focus the email input
        setTimeout(() => emailInput.focus(), 100);
        
        document.addEventListener('keydown', onKeyDown);
        overlay.addEventListener('click', onOverlayClick);
      }
      
      function close() {
        overlay.hidden = true;
        overlay.setAttribute('aria-hidden', 'true');
        document.body.style.overflow = '';
        document.removeEventListener('keydown', onKeyDown);
        overlay.removeEventListener('click', onOverlayClick);
        
        // Reset form
        emailForm.reset();
        formMessage.className = 'form-message';
        formMessage.textContent = '';
        submitBtn.className = 'email-submit-btn';
        submitBtn.disabled = false;
        
        if (lastFocus && typeof lastFocus.focus === 'function') {
          lastFocus.focus();
        }
      }
      
      function onOverlayClick(e) {
        if (e.target === overlay) close();
      }
      
      function onKeyDown(e) {
        if (e.key === 'Escape') {
          e.preventDefault();
          close();
          return;
        }
      }
      
      function validateEmail(email) {
        const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return re.test(email);
      }
      
      function showMessage(message, type) {
        formMessage.className = `form-message ${type}`;
        formMessage.textContent = message;
      }
      
      async function handleSubmit(e) {
        e.preventDefault();
        
        const email = emailInput.value.trim();
        
        if (!email) {
          showMessage('Please enter your email address.', 'error');
          emailInput.focus();
          return;
        }
        
        if (!validateEmail(email)) {
          showMessage('Please enter a valid email address.', 'error');
          emailInput.focus();
          return;
        }
        
        // Show loading state
        submitBtn.disabled = true;
        submitBtn.classList.add('loading');
        showMessage('', '');
        
        try {
          // Check if EmailJS is ready with more thorough checks
          if (!window.emailJSReady || typeof emailjs === 'undefined' || !emailjs.send) {
            console.log('EmailJS not ready, waiting...');
            showMessage('Connecting to email service...', 'info');
            
            // Wait longer for EmailJS to load with multiple checks
            let waitAttempts = 0;
            const maxWaitAttempts = 10;
            
            while (waitAttempts < maxWaitAttempts && (!window.emailJSReady || typeof emailjs === 'undefined' || !emailjs.send)) {
              await new Promise(resolve => setTimeout(resolve, 1000));
              waitAttempts++;
              console.log(`EmailJS wait attempt ${waitAttempts}/${maxWaitAttempts}`);
            }
            
            if (!window.emailJSReady || typeof emailjs === 'undefined' || !emailjs.send) {
              throw new Error('EmailJS service failed to load. Please refresh the page and try again.');
            }
            
            console.log('EmailJS is now ready');
            showMessage('', '');
          }
          
          // Check for duplicate emails locally first
          const emails = JSON.parse(localStorage.getItem('countryball_emails') || '[]');
          
          if (emails.includes(email)) {
            showMessage('You\'re already subscribed! 🎉', 'success');
          } else {
            // Send email via EmailJS
            const templateParams = {
              from_name: email,
              from_email: email,
              to_name: 'Countryball Cards Team',
              message: `New newsletter signup from ${email}`,
              signup_date: new Date().toLocaleString(),
              source_page: 'Packages Page',
              user_email: email,
              reply_to: email
            };

            console.log('Sending email with EmailJS...');
            const result = await emailjs.send(
              'service_icdib4n',
              'template_j6fy2w2', 
              templateParams
            );

            console.log('EmailJS response:', result);

            if (result.status === 200) {
              // Store email locally to prevent duplicates
              emails.push(email);
              localStorage.setItem('countryball_emails', JSON.stringify(emails));
              
              showMessage('Success! You\'ll be notified when we launch! 🚀', 'success');
              console.log('Email sent successfully via EmailJS');
              
              // Track successful signup
              try {
                if (window.rdt) rdt('track', 'SignUp', {
                  event_name: 'EmailSignup',
                  content_name: 'Newsletter',
                  content_category: 'Email Marketing',
                  content_ids: ['email_signup'],
                  content_type: 'signup'
                });
              } catch (_) {}
              
              try {
                if (window.rdt) rdt('track', 'Custom', {
                  customEventName: 'EmailSignup',
                  content_name: 'Newsletter'
                });
              } catch (_) {}
            } else {
              throw new Error('Email sending failed');
            }
          }
          
          // Show success state
          submitBtn.classList.remove('loading');
          submitBtn.classList.add('success');
          submitBtn.querySelector('.submit-text').textContent = 'Subscribed!';
          
          // Close modal after showing success
          setTimeout(close, 2000);
          
        } catch (error) {
          console.error('Email submission error:', error);
          
          // More specific error messages
          if (error.message && error.message.includes('EmailJS service is not available')) {
            showMessage('Service temporarily unavailable. Please try again in a moment.', 'error');
          } else if (error.status === 400) {
            showMessage('Invalid email format. Please check your email address.', 'error');
          } else if (error.status === 401 || error.status === 403) {
            showMessage('Authentication error. Please try again later.', 'error');
          } else {
            showMessage('Unable to send email. Please try again or contact support.', 'error');
          }
          
          submitBtn.disabled = false;
          submitBtn.classList.remove('loading');
        }
      }
      
      // Event listeners
      if (closeBtn) closeBtn.addEventListener('click', close);
      if (emailForm) emailForm.addEventListener('submit', handleSubmit);
      
      // Open the modal
      open();
    }
  </script>
</body>
</html>
