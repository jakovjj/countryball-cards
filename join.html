<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <meta name="referrer" content="no-referrer-when-downgrade" />
  <title>Join Newsletter & Get Updates - Countryball Cards</title>
  <meta name="description" content="Join the Countryball Cards newsletter for Kickstarter updates. Get notified when we launch October 1st, 2025 and receive exclusive updates." />
  <link rel="canonical" href="https://countryballcards.com/join.html" />
  <meta name="robots" content="index,follow" />
  <meta name="theme-color" content="#151515" />
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://countryballcards.com/join.html">
  <meta property="og:title" content="Join Newsletter & Get Updates - Countryball Cards">
  <meta property="og:description" content="Be the first to know when Countryball Cards launches on Kickstarter October 1st! Join our newsletter for exclusive updates.">
  <meta property="og:image" content="https://countryballcards.com/logo.png">
  <meta property="og:locale" content="en_US">
  <meta property="og:site_name" content="Countryball Cards">
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://countryballcards.com/join.html">
  <meta property="twitter:title" content="Join Newsletter & Get Updates - Countryball Cards">
  <meta property="twitter:description" content="Be the first to know when Countryball Cards launches on Kickstarter October 1st! Join our newsletter for exclusive updates.">
  <meta property="twitter:image" content="https://countryballcards.com/logo.png">
  
  <!-- Enhanced Favicon Implementation -->
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="icon" sizes="any" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
  <link rel="manifest" href="site.webmanifest">
  
  <!-- Structured Data for Newsletter Signup -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "Countryball Cards Newsletter Signup",
    "description": "Subscribe to Countryball Cards newsletter for Kickstarter launch updates and exclusive content about the strategic card game.",
    "url": "https://countryballcards.com/join.html",
    "isPartOf": {
      "@type": "WebSite",
      "url": "https://countryballcards.com",
      "name": "Countryball Cards"
    },
    "about": {
      "@type": "Product",
      "name": "Countryball Cards",
      "description": "Strategic countryball-themed card game launching on Kickstarter October 1st, 2025"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Glare Studios",
      "url": "https://countryballcards.com"
    }
  }
  </script>
  
  <!-- Performance hints -->
  <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin>
  <link rel="preconnect" href="https://www.google-analytics.com" crossorigin>
  <link rel="preconnect" href="https://www.redditstatic.com" crossorigin>
  <link rel="preconnect" href="https://ads.reddit.com" crossorigin>
  <link rel="preconnect" href="https://mineward.us.to" crossorigin>
  <link rel="dns-prefetch" href="https://api.emailjs.com">
  <link rel="dns-prefetch" href="https://pixel-config.reddit.com">
  <link rel="dns-prefetch" href="https://events.reddit.com">
  
  <!-- Preload critical assets -->
  <link rel="preload" as="image" href="logo.png" fetchpriority="high" />
  <link rel="preload" as="image" href="cards.png" fetchpriority="high" />
  <link rel="preload" href="styles.css?v=2025081801" as="style" />
  <link rel="preload" href="js/email-collector.js?v=1.0.0" as="script" />
  
  <!-- Google tag (GA4) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-M366HCYL8Z"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);} 
    gtag('js', new Date());
    gtag('config', 'G-M366HCYL8Z', {
      transport_type: 'beacon',
      anonymize_ip: true,
      allow_google_signals: false
    });
  </script>
  
  <!-- Critical CSS (above-the-fold) -->
  <style>
    :root{--bg:#151515;--card:#1d1d1d;--gold:#c7a455;--text:#eee;--muted:#b7b7b7}
    *{box-sizing:border-box;max-width:100%}
    body{margin:0;background:var(--bg);color:var(--text);font:16px/1.4 system-ui,Segoe UI,Inter,Arial;overflow-x:hidden;max-width:100vw}
    .wrap{max-width:980px;margin:0 auto;padding:28px;box-sizing:border-box}
    .frame{border:3px solid var(--gold);border-radius:18px;padding:28px;box-sizing:border-box;max-width:100%;opacity:1}
    .join-container{min-height:calc(100vh - 112px);display:flex;flex-direction:column;justify-content:center;align-items:center;padding:0;box-sizing:border-box;text-align:center}
    .join-logo{max-width:400px;height:auto;margin:0 auto 20px;display:block;filter:drop-shadow(0 0 8px rgba(199,164,85,0.3));transition:all 0.5s ease;position:relative;animation:float 3s ease-in-out infinite}
    .join-logo:hover{filter:drop-shadow(0 0 12px rgba(199,164,85,0.5));transform:scale(1.02) translateY(var(--float-offset, 0px))}
    .join-logo::before{content:'';position:absolute;top:-10px;left:-10px;right:-10px;bottom:-10px;background:radial-gradient(circle at 20% 30%, rgba(255,255,255,0.2) 1px, transparent 2px),radial-gradient(circle at 80% 70%, rgba(199,164,85,0.3) 1px, transparent 2px),radial-gradient(circle at 60% 15%, rgba(255,255,255,0.1) 1px, transparent 2px);pointer-events:none;opacity:0.6;animation:sparkle 3s ease-in-out infinite}
    @keyframes float{0%,100%{transform:translateY(0px);--float-offset:0px}50%{transform:translateY(-8px);--float-offset:-8px}}
    @keyframes sparkle{0%,100%{opacity:0.3;transform:rotate(0deg)}25%{opacity:0.7;transform:rotate(90deg)}50%{opacity:0.4;transform:rotate(180deg)}75%{opacity:0.8;transform:rotate(270deg)}}
    .join-title{font-size:clamp(28px,5vw,36px);color:var(--text);margin:0 auto 16px;font-weight:700;text-align:center}
    .join-subtitle{color:var(--muted);margin:0 auto 32px;font-size:16px;line-height:1.4;max-width:500px;text-align:center}
    .success-message{display:none;background:rgba(40,167,69,0.1);border:2px solid rgba(40,167,69,0.5);border-radius:12px;padding:24px;margin-bottom:20px;color:#28a745;font-size:14px;font-weight:600;text-align:center;max-width:500px;width:100%;box-sizing:border-box}
    .success-message.show{display:block !important}
    .success-message h3{color:#28a745;margin:0 0 12px 0;font-size:18px}
    .success-message p{margin:0 0 16px 0;line-height:1.4}
    .homepage-btn{background:var(--gold);color:var(--bg);padding:10px 20px;border:none;border-radius:8px;font-size:14px;font-weight:700;text-decoration:none;display:inline-flex;align-items:center;gap:6px;cursor:pointer;transition:all 0.3s ease}
    .homepage-btn:hover{background:#b8954a;transform:translateY(-2px)}
    .join-footer{margin-top:auto;padding-top:24px;color:var(--muted);font-size:12px;text-align:center}
    .join-footer a{color:var(--gold);text-decoration:none}
    .join-footer a:hover{text-decoration:underline}
    .email-form-container{max-width:400px;width:100%;text-align:center;margin:0 auto}
    .email-input{padding:16px 20px;border:3px solid var(--gold);border-radius:12px !important;background:rgba(255,255,255,0.05);color:var(--text);font-size:16px;width:100%;margin:0 auto 16px;box-sizing:border-box;transition:all 0.3s ease;box-shadow:0 0 0 2px rgba(199,164,85,0.3);text-align:center;-webkit-appearance:none !important;-moz-appearance:none !important;appearance:none !important;-webkit-border-radius:12px !important;-moz-border-radius:12px !important}
    .email-input:focus{outline:none;border-color:var(--gold);box-shadow:0 0 0 4px rgba(199,164,85,0.5);background:rgba(255,255,255,0.08)}
    .email-input::placeholder{color:rgba(238,238,238,0.6);text-align:center}
    .email-submit{padding:16px 24px;background:linear-gradient(135deg,var(--gold),#d4b866);border:none;border-radius:12px;color:var(--bg);font-size:16px;font-weight:700;cursor:pointer;transition:all 0.3s ease;display:flex;align-items:center;justify-content:center;gap:8px;width:100%;box-sizing:border-box;margin:0 auto}
    .email-submit:hover{background:linear-gradient(135deg,#d4b866,#e6c875);transform:translateY(-2px)}
    .form-message{margin:16px auto 0;padding:0;font-size:14px;font-weight:600;text-align:center;max-width:400px}
    .form-message.success{color:#00ff88}
    .form-message.error{color:#ff6b6b}
    .inline-email-submit:hover{background:linear-gradient(135deg,#d4b866,#e6c875);transform:translateY(-2px)}
    .inline-submit-icon{width:16px;height:16px;fill:currentColor}
    .inline-submit-text{white-space:nowrap}
    .inline-form-message{margin:0;padding:0;height:0;overflow:hidden;font-size:14px;font-weight:600}
    .inline-form-message.success{color:#00ff88;height:auto;padding:8px 0}
    .inline-form-message.error{color:#ff6b6b;height:auto;padding:8px 0}
    svg{flex-shrink:0}
    input,button{font-family:inherit}
    @keyframes fadeIn{from{opacity:0}to{opacity:1}}
    @keyframes shake{
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-3px); }
      75% { transform: translateX(3px); }
    }
    @keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.08)}100%{transform:scale(1)}}
    .join-content{animation:fadeIn 0.3s ease-in-out}
    .button-error{
      background:linear-gradient(135deg,#c0392b,#e74c3c) !important;
      color:#fff !important;
      border:2px solid #a93226 !important;
      box-shadow:0 2px 4px rgba(192,57,43,0.2) !important;
      animation:shake 0.6s ease-in-out !important;
      transition:all 0.3s ease !important;
    }
    .button-error:hover{
      background:linear-gradient(135deg,#a93226,#c0392b) !important;
      cursor:not-allowed !important;
    }
    @media(max-width:768px){
      .join-content{padding:20px 16px}
      .join-logo{max-width:250px}
      .email-input{
        -webkit-border-radius:12px !important;
        -moz-border-radius:12px !important;
        border-radius:12px !important;
        -webkit-appearance:none !important;
        -moz-appearance:none !important;
        appearance:none !important;
      }
    }
    @media(max-width:480px){
      .email-input{
        -webkit-border-radius:12px !important;
        -moz-border-radius:12px !important;
        border-radius:12px !important;
        -webkit-appearance:none !important;
        -moz-appearance:none !important;
        appearance:none !important;
        border-style:solid !important;
        border-width:3px !important;
        border-color:var(--gold) !important;
      }
    }
  </style>
  
  <!-- Load non-critical CSS asynchronously -->
  <link rel="preload" href="styles.css?v=2025081801" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="styles.css?v=2025081801"></noscript>

  <!-- Countryball Cards Email Collection System - defer to avoid blocking -->
  <script src="js/email-collector.js?v=1.0.0" defer></script>
  
  <!-- Performance monitoring and optimization -->
  <script src="performance.js?v=1.0.0" defer></script>
  
  <!-- Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(registration => console.log('SW registered'))
          .catch(error => console.log('SW registration failed'));
      });
    }
  </script>
</head>
<body>
  <div class="wrap">
    <div class="frame">
      <div class="join-container">
        <img src="card.png" alt="Countryball Cards" class="join-logo" onerror="this.style.display='none';">
        
        <div class="success-message" id="successMessage" style="display:none;">
          <h3>🎉 Early Bird Spot Reserved!</h3>
          <p>You'll get your 5€ discount when we start Crowdfunding on October 1st!</p>
          <a href="index.html" class="homepage-btn" style="margin-top: 8px;">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
            </svg>
            Go to Homepage
          </a>
        </div>
        
        <div id="emailFormContainer">
          <h1 class="join-title">🚀 Join Prelaunch!</h1>
          <p class="join-subtitle">
            <strong>Crowdfunding starts Oct 1st!</strong><br>
            Sign up for updates, get an <span style="color: var(--gold); font-weight: 600;">early bird discount</span> and be first in line when we go live.
          </p>
          
          <div class="email-form-container">
            <form id="joinEmailForm">
              <input 
                type="email" 
                id="joinEmailInput" 
                placeholder="Enter your email address" 
                required 
                autocomplete="email"
                class="email-input"
              >
              <button type="submit" class="email-submit" id="joinEmailSubmitBtn">
                <span>Get Updates</span>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M2,21L23,12L2,3V10L17,12L2,14V21Z"/>
                </svg>
              </button>
              <div class="form-message" id="joinFormMessage"></div>
            </form>
          </div>
        </div>
        
        <div class="privacy-notice" style="font-size:10px;color:var(--muted);margin:12px auto 0;text-align:center;max-width:400px">
          By subscribing, you agree to our <a href="privacy-policy.html" style="color:var(--gold);text-decoration:none">Privacy Policy</a>
        </div>
      </div>
    </div>
    
    <div class="join-footer">
      © 2025 Glare Studios • Made for fans of countryballs & strategy.<br>
      <a href="privacy-policy.html">Privacy Policy</a> • 
      <a href="terms-and-conditions.html">Terms & Conditions</a>
    </div>
  </div>

  <script>
    // Eurozone countries
    const eurozoneCountries = [
      'AT', 'BE', 'CY', 'EE', 'FI', 'FR', 'DE', 'GR', 'IE', 'IT', 'LV', 'LT', 'LU', 'MT', 'NL', 'PT', 'SK', 'SI', 'ES', 'HR'
    ];

    // Currency conversion for discount display
    function updateDiscountCurrency() {
      try {
        fetch('https://ipapi.co/json/')
          .then(response => response.json())
          .then(data => {
            const countryCode = data.country_code;
            const isEurozone = eurozoneCountries.includes(countryCode);
            
            // Update discount amount in subtitle
            const subtitleEl = document.querySelector('.join-subtitle');
            if (subtitleEl) {
              let currentText = subtitleEl.innerHTML;
              if (isEurozone) {
                // Show EUR (already default)
                currentText = currentText.replace(/\$6 early bird discount/g, '5€ early bird discount');
              } else {
                // Show USD
                currentText = currentText.replace(/5€ early bird discount/g, '$6 early bird discount');
              }
              subtitleEl.innerHTML = currentText;
            }
          })
          .catch(() => {
            // Default to EUR if detection fails
            console.log('Country detection failed, using EUR pricing');
          });
      } catch (error) {
        console.log('Currency update error:', error);
      }
    }

    // Email form functionality for join page
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize currency display
      updateDiscountCurrency();
      
      // Initialize join form after a short delay to ensure all scripts are loaded
      setTimeout(() => {
        initializeJoinForm();
      }, 100);
    });

    function initializeJoinForm() {
      console.log('initializeJoinForm called');
      
      // Initialize the new email collector
      const emailCollector = new CountryballEmailCollector({ debug: true });
      
      const joinEmailForm = document.getElementById('joinEmailForm');
      const joinEmailInput = document.getElementById('joinEmailInput');
      const joinSubmitBtn = document.getElementById('joinEmailSubmitBtn');
      const joinFormMessage = document.getElementById('joinFormMessage');
      const successMessage = document.getElementById('successMessage');
      const emailFormContainer = document.getElementById('emailFormContainer');
      
      console.log('Elements found:', {
        form: !!joinEmailForm,
        input: !!joinEmailInput,
        button: !!joinSubmitBtn,
        message: !!joinFormMessage
      });
      
      if (!joinEmailForm || !joinEmailInput || !joinSubmitBtn || !joinFormMessage) {
        console.error('Join form elements not found');
        return;
      }
      
      function validateEmail(email) {
        const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return re.test(email);
      }
      
      function showMessage(message, type) {
        joinFormMessage.className = `form-message ${type}`;
        joinFormMessage.textContent = message;
        joinFormMessage.style.display = message ? 'block' : 'none';
      }
      
      function triggerErrorState() {
        console.log('triggerErrorState called');
        const buttonSpan = joinSubmitBtn.querySelector('span');
        const buttonIcon = joinSubmitBtn.querySelector('svg');
        if (!buttonSpan) {
          console.error('Button span not found');
          return;
        }
        
        const originalText = buttonSpan.textContent;
        console.log('Original button text:', originalText);
        
        // Apply softer red error styles
        joinSubmitBtn.style.setProperty('background', 'linear-gradient(135deg,#c0392b,#e74c3c)', 'important');
        joinSubmitBtn.style.setProperty('color', '#fff', 'important');
        joinSubmitBtn.style.setProperty('border', '2px solid #a93226', 'important');
        joinSubmitBtn.style.setProperty('box-shadow', '0 2px 4px rgba(192,57,43,0.2)', 'important');
        joinSubmitBtn.style.setProperty('animation', 'shake 0.6s ease-in-out', 'important');
        joinSubmitBtn.disabled = true;
        
        // Hide the paper airplane icon
        if (buttonIcon) {
          buttonIcon.style.display = 'none';
        }
        
        // Change button text
        buttonSpan.textContent = 'Please enter a valid email';
        console.log('Button text changed to:', buttonSpan.textContent);
        
        // Style input field with softer red colors
        joinEmailInput.style.setProperty('border-color', '#c0392b', 'important');
        joinEmailInput.style.setProperty('box-shadow', '0 0 0 3px rgba(192, 57, 43, 0.15)', 'important');
        joinEmailInput.style.setProperty('background-color', 'rgba(192, 57, 43, 0.05)', 'important');
        
        // Reset after 3 seconds (shorter duration)
        setTimeout(() => {
          console.log('Resetting error state');
          joinSubmitBtn.style.removeProperty('background');
          joinSubmitBtn.style.removeProperty('color');
          joinSubmitBtn.style.removeProperty('border');
          joinSubmitBtn.style.removeProperty('box-shadow');
          joinSubmitBtn.style.removeProperty('animation');
          joinSubmitBtn.style.removeProperty('transform');
          joinSubmitBtn.disabled = false;
          buttonSpan.textContent = originalText;
          
          // Show the paper airplane icon again
          if (buttonIcon) {
            buttonIcon.style.display = '';
          }
          
          joinEmailInput.style.removeProperty('border-color');
          joinEmailInput.style.removeProperty('box-shadow');
          joinEmailInput.style.removeProperty('background-color');
          joinEmailInput.style.removeProperty('animation');
        }, 3000);
      }
      
      function showSuccess() {
        console.log('Showing success message...');
        
        // Hide the form container
        emailFormContainer.style.display = 'none';
        
        // Show the success message
        successMessage.style.display = 'block';
        successMessage.classList.add('show');
        
        console.log('Success message visibility:', window.getComputedStyle(successMessage).display);
        console.log('Success message classes:', successMessage.classList.toString());
        
        // Track successful signup
        try {
          if (window.rdt) {
            rdt('track', 'SignUp', {
              event_name: 'EmailSignup',
              content_name: 'Newsletter',
              content_category: 'Email Marketing',
              content_ids: ['join_page_signup'],
              content_type: 'signup'
            });
          }
        } catch (_) {}
        
        try {
          if (window.gtag) {
            gtag('event', 'email_signup', {
              event_category: 'conversion',
              event_label: 'join_page',
              value: 1
            });
          }
        } catch (_) {}
      }
      
      
      async function handleSubmit(e) {
        console.log('handleSubmit called - form submitted!');
        e.preventDefault();
        e.stopPropagation();
        
        const email = joinEmailInput.value.trim();
        console.log('Email entered:', email);
        
        // Check validation
        if (!email || !validateEmail(email)) {
          console.log('Email validation failed');
          showMessage('Please enter a valid email address.', 'error');
          triggerErrorState();
          joinEmailInput.focus();
          return;
        }
        
        console.log('Email validation passed, proceeding with submission');
        
        // Show loading state
        joinSubmitBtn.disabled = true;
        joinSubmitBtn.classList.add('loading');
        const originalText = joinSubmitBtn.querySelector('span').textContent;
        joinSubmitBtn.querySelector('span').textContent = 'Subscribing...';
        showMessage('', '');
        
        try {
          console.log('Submitting email using EmailCollector...');
          
          // Use the EmailCollector's subscribe method
          const result = await emailCollector.subscribe(email, {
            source: 'join_page',
            formData: {
              page_url: window.location.href,
              page_title: document.title,
              timestamp: new Date().toISOString()
            }
          });

          console.log('Email subscription successful:', result);
          showSuccess();

        } catch (error) {
          console.error('Email signup error:', error);
          showMessage('Something went wrong. Please try again later.', 'error');
        } finally {
          // Reset button state
          joinSubmitBtn.disabled = false;
          joinSubmitBtn.classList.remove('loading');
          joinSubmitBtn.querySelector('span').textContent = originalText;
        }
      }
      
      // Add event listeners
      joinEmailForm.addEventListener('submit', handleSubmit);
      
      // Also add click listener to button as backup
      joinSubmitBtn.addEventListener('click', function(e) {
        console.log('Button clicked directly');
        // If form submission doesn't work, handle it here
        if (!joinEmailInput.value.trim() || !validateEmail(joinEmailInput.value.trim())) {
          e.preventDefault();
          console.log('Button click - validation failed');
          triggerErrorState();
          joinEmailInput.focus();
        }
      });
      
      // Focus effects
      joinEmailInput.addEventListener('focus', function() {
        this.style.boxShadow = '0 0 0 4px rgba(199, 164, 85, 0.3)';
      });
      
      joinEmailInput.addEventListener('blur', function() {
        this.style.boxShadow = '';
      });
      
      console.log('Join form initialized successfully');
    }
  </script>

  <!-- Mobile-First CVR Optimization Script -->
  <script>
    (function () {
      const emailInput = document.querySelector('#joinEmailInput');
      const submitBtn = document.querySelector('#joinEmailSubmitBtn');

      // Enhanced autofocus for mobile and desktop
      function initializeFocus() {
        // Desktop autofocus on page load
        if (window.innerWidth > 768) {
          window.requestAnimationFrame(() => {
            emailInput?.focus();
          });
        }
        
        // Mobile: focus after first interaction to respect user experience
        let hasInteracted = false;
        const handleFirstInteraction = function() {
          if (!hasInteracted && emailInput) {
            hasInteracted = true;
            setTimeout(() => emailInput.focus(), 100);
            document.removeEventListener('touchstart', handleFirstInteraction);
            document.removeEventListener('click', handleFirstInteraction);
          }
        };
        
        document.addEventListener('touchstart', handleFirstInteraction, {passive: true});
        document.addEventListener('click', handleFirstInteraction, {passive: true});
      }

      // Enhanced keyboard shortcuts
      emailInput?.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' && emailInput.value.trim()) {
          e.preventDefault();
          submitBtn?.click();
        }
      });

      // Enhanced mobile UX improvements
      function enhanceMobileUX() {
        if (emailInput) {
          // Prevent zoom on focus for iOS
          emailInput.addEventListener('focus', function() {
            if (/iPhone|iPad|iPod/.test(navigator.userAgent)) {
              document.querySelector('meta[name=viewport]')
                ?.setAttribute('content', 'width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no');
            }
          });

          // Restore viewport on blur
          emailInput.addEventListener('blur', function() {
            if (/iPhone|iPad|iPod/.test(navigator.userAgent)) {
              setTimeout(() => {
                document.querySelector('meta[name=viewport]')
                  ?.setAttribute('content', 'width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no');
              }, 100);
            }
          });

          // Enhanced input validation feedback
          emailInput.addEventListener('input', function() {
            const email = this.value.trim();
            if (email && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
              this.style.borderColor = 'rgba(192, 57, 43, 0.6)';
            } else {
              this.style.borderColor = 'var(--gold)';
            }
          });
        }
      }

      // Initialize all improvements when DOM is ready
      function initializeCVROptimizations() {
        initializeFocus();
        enhanceMobileUX();
      }

      // Wait for DOM and other scripts to load
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initializeCVROptimizations);
      } else {
        // DOM already loaded, wait a bit for other scripts
        setTimeout(initializeCVROptimizations, 200);
      }
    })();
  </script>

  <!-- Reddit Pixel Code -->
  <script>
    !function(w,d){
      if(!w.rdt){
        var p=w.rdt=function(){
          p.sendEvent?p.sendEvent.apply(p,arguments):p.callQueue.push(arguments)
        };
        p.callQueue=[];
        var t=d.createElement("script");
        t.src="https://www.redditstatic.com/ads/pixel.js",t.async=!0;
        var s=d.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(t,s)
      }
    }(window,document);
    
    rdt('init','a2_hgzcstbb8534', {
      optOut: false,
      useDecimalCurrencyValues: true
    });
    rdt('track', 'PageVisit');
  </script>
</body>
</html>
